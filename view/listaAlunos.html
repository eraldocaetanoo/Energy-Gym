<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Gym - Listagem de Alunos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" href="../imagem/raio.png" type="image/png">

</head>
<body>
    
    <!-- Cabeçalho com o ícone de menu -->
    <header class="header">
        <div class="menu-icon" onclick="toggleMenu()"> <!-- Ícone de três barras -->
            &#9776; <!-- HTML code for three bars (hamburger icon) -->
        </div>
       <br>
        <div class="logo">
            <a href="../view/adm.html"><img src="../imagem/logo.png" alt="logo">
            <h1>ENERGY GYM</h1>
            </a>
        </div>
        <br>
        <div class="sobre">
            <a href="../view/sobre.html">QUEM SOMOS</a>
        </div>
        
    </header>

    <!-- Menu lateral -->
    <nav class="sidebar" id="sidebar">
        
        <ul>
            <li><img class="foto_perfil" src="../imagem/pngegg.png" alt="foto_perfil">
                <p></p>
                    <br>
                    <a href="#perfil">Meu Perfil</a>
                    <li><a href="../view/adm.html">Área do administrador</a></li>
                    <li><a href="#avaliacoes">Avaliações Físicas</a></li>
                    <li><a href="#freq">Frequência</a></li>
                    <li><a href="#pagamento">Pagamento</a></li>
                    <li><a href="../view/loginadm.html">Sair</a></li>
        </ul>
    </nav>

    <!-- Conteúdo principal da página -->
    <main>
        <div class="adm">
            <div class="">
                <h1><strong>Listagem de alunos</strong></h1>
                <br>
                
                    
            

                <!-- <form id="formCad" action="#" onsubmit="return false;">
                
                    
                </form> -->

                <div>
                    <nav class="navbar navbar-light">
                        <form class="form-inline d-flex">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">Pesquisar cadastro:</span>
                            </div>
                            <input id="pesquisar" class="form-control me-2" type="search" placeholder="Pesquisar" aria-label="Pesquisar">
                            <button class="btn btn-success" type="submit">Pesquisar</button>
                        </form>
                    </nav>
                </div>

                <br>
                <div>
                    <ul class="list-group" id="userLists"></ul>
                </div>
                <br>

                <div id="lista_opcoes">
                    <a href="../view/cadastro.html">
                    <button type="button" class="btn btn-success" id="cadastrar">Cadastrar novo aluno</button>
                    </a>
                    <button class="btn btn-primary" id="recupbutton" type="button">Vizualizar todos os alunos cadastrados</button>
                    
                    <button type="button" id="limparStorage" class="btn btn-danger">Excluir todos os cadastros</button>
                </div>
                <br>
                
                <div>
                        <ul class="list-group" id="userList"></ul>
                </div>
                <br>
            </div>
        </div>
        <button id="btnTopo" onclick="voltarAoTopo()">↑</button>
    </main>
    <footer>
        <p>&copy; 2025 Energy Gym. Todos os direitos reservados.</p>
    </footer>
    <script src="../js/main.js"></script>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Botão para exibir os dados
            document.getElementById('recupbutton').addEventListener('click', function () {
                // Obtém os dados do localStorage
                const users = JSON.parse(localStorage.getItem('users')) || [];

                // Seleciona a lista no HTML
                const listaUsuarios = document.getElementById('userList');
                console.log('Evento de submit capturado!'); // Teste para verificar o evento.
                // Limpa a lista antes de adicionar os itens
                listaUsuarios.innerHTML = '';
                if (users.length === 0) {
                    showTemporaryAlertDanger('Nenhum aluno cadastrado!', 3000);
                    return;
                }

            
                // Adiciona cada usuário como um item da lista
                users.forEach((user, index) => {
                    const li = document.createElement('li');
                    li.className = 'list-group-item list-group-item-action d-flex justify-content-between align-items-start';

                    // Dados do usuário
                    const info = document.createElement('div');
                    info.innerHTML = `
                        <div><strong>Nome:</strong> \u00A0 ${user.nome}</div>
                        <div><strong>E-mail:</strong> \u00A0 ${user.email}</div>
                        <div><strong>Data de nascimento:</strong> \u00A0 ${user.dataFormatada}</div>
                        <div><strong>Senha:</strong> \u00A0 ${user.senha}</div>
                    `;
                    li.appendChild(info);

                    // Contêiner para os botões
                    const buttonGroup = document.createElement('div');

                    // Botão de Editar
                    const editButton = document.createElement('button');
                    editButton.className = 'btn btn-warning btn-sm me-2'; // Classes Bootstrap
                    editButton.textContent = 'Editar';
                    editButton.addEventListener('click', function () {
                        editarUsuario(index);
                    });
                    buttonGroup.appendChild(editButton);

                    // Botão de Excluir
                    const deleteButton = document.createElement('button');
                    deleteButton.className = 'btn btn-danger btn-sm'; // Classes Bootstrap
                    deleteButton.textContent = 'Excluir';
                    deleteButton.addEventListener('click', function () {
                        excluirUsuario(index);
                    });
                    buttonGroup.appendChild(deleteButton);

                    li.appendChild(buttonGroup);

                    // Adiciona o item à lista
                    listaUsuarios.appendChild(li);
                });
            });

            // Função para editar um usuário
            function editarUsuario(index) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const user = users[index];

                // Exemplo: Solicita os novos dados do usuário (modificar conforme necessário)
                const novoNome = prompt('Novo nome:', user.nome) || user.nome;
                const novoEmail = prompt('Novo e-mail:', user.email) || user.email;
                const novaData = prompt('Nova data de nascimento:', user.dataFormatada) || user.dataFormatada;
                const novaSenha = prompt('Nova senha:', user.senha) || user.senha;

                // Atualiza os dados no array e salva no localStorage
                users[index] = { nome: novoNome, email: novoEmail, dataFormatada: novaData, senha: novaSenha };
                localStorage.setItem('users', JSON.stringify(users));

                // Recarrega a página para mostrar a lista atualizada
                location.reload();
            }

            // Função para excluir um usuário
            function excluirUsuario(index) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                users.splice(index, 1); // Remove o usuário do array
                localStorage.setItem('users', JSON.stringify(users)); // Atualiza o localStorage

                // Recarrega a página para mostrar a lista atualizada
                location.reload();
            }

            // Botão para limpar todos os dados do localStorage
            document.getElementById('limparStorage').addEventListener('click', function () {
                localStorage.clear(); // Limpa todos os dados do localStorage
                showTemporaryAlertDanger('Todos os cadastros foram excluídos!', 3000);
                document.getElementById('userList').innerHTML = ''; // Limpa a lista exibida
            });
        });
    </script>


    <!-- <script>
        //Script js para listar os cadastros
        document.addEventListener('DOMContentLoaded', function () {
        // Botão para exibir os dados
        document.getElementById('recupbutton').addEventListener('click', function () {
            // Obtém os dados do localStorage
            const users = JSON.parse(localStorage.getItem('users')) || [];

            // Seleciona a lista no HTML
            const listaUsuarios = document.getElementById('userList');
            console.log('Evento de submit capturado!'); // Teste para verificar o evento.
            // Limpa a lista antes de adicionar os itens
            listaUsuarios.innerHTML = '';
            if (users.length === 0) {
                //alert('Nenhum dado encontrado no localStorage.');
                showTemporaryAlertDanger('Nenhum aluno cadastrado!', 3000);
                return;
            }
            users.reverse();
            // Adiciona cada usuário como um item da lista
            users.forEach(user => {
                const li = document.createElement('li');
                li.className = 'list-group-item list-group-item-action'; // Classe Bootstrap para estilizar

                const nome = document.createElement('div');
                nome.innerHTML = `<strong>Nome:</strong     > \u00A0 \u00A0${user.nome}`;
                li.appendChild(nome);
                
                const email = document.createElement('div');
                email.innerHTML = `<strong>E-mail:</strong> \u00A0 \u00A0${user.email}`;
                li.appendChild(email);

                const nascimento = document.createElement('div');
                nascimento.innerHTML = `<strong>Data de nascimento:</strong> \u00A0 \u00A0${user.dataFormatada}`;
                li.appendChild(nascimento);

                const senha = document.createElement('div');
                senha.innerHTML = `<strong>Senha:</strong> \u00A0 \u00A0${user.senha}`;
                li.appendChild(senha);

        
                // Adiciona o item à lista
                listaUsuarios.appendChild(li);
                
            });

            
        });

        document.getElementById('limparStorage').addEventListener('click', function () {
            localStorage.clear(); // Limpa todos os dados do localStorage
            showTemporaryAlertDanger('Todos os cadastros foram excluídos!', 3000);
            //alert('Dados do localStorage foram apagados!');
            document.getElementById('userList').innerHTML = ''; // Limpa a lista exibida
        });
    }); 

    </script> -->
</body>
</html>
